@startuml Diagrama de clases - Entrega 2

skinparam linetype ortho

FuenteDeDatos --* Coleccion
Criterio --* Coleccion
Hecho --* Multimedia
SolicitudEliminacion -- EstadoSolicitud
SolicitudEliminacion -- Contribuyente
SolicitudEliminacion *-- Hecho
SolicitudEliminacion <-- Administrador
HechoFD -- FuenteDinamica
HechoFE -- FuenteEstatica
HechoFP -- FuenteProxy
CSV -- FuenteEstatica
Usuario -- Rol
Usuario --o SolicitudEliminacion
SolicitudEliminacion -- DetectorDeSpam
/'
Tipo	Símbolo	Finalidad
Extensión	<|--	Especialización de una clase en una jerarquía
Implementación	<|..	Realización de una interfaz mediante una clase
Composición	*--	La parte no puede existir sin el todo
Agregación	o--	La parte puede existir independientemente del todo
Dependencia	-->	El objeto utiliza otro objeto
Dependencia	..>	Una forma más débil de dependencia

'/

interface Hecho {
    +titulo: String
    +descripcion: String
    +categoria: String
    +latitud: Float
    +longitud: Float
    +fechaHecho: Date
    +fechaCarga: Date
    +fuente: FuenteDeDatos
    -eliminado: Boolean
    +multimedia : List<Multimedia>
    +metadata: List<String> 
    {method} etiquetarse(metadata:String)
}
class HechoFD implements Hecho{
    +autorFD: Usuario
    -anonimo: Boolean
}

class HechoFE implements Hecho{
    +autorFE: StringUsuario
}

class HechoFP implements Hecho{
    +AutorFP: String
}

abstract Multimedia{
    +path: String
    +tamaño: Long
}

class CSV{
    +path: String
    +tamaño: Long
}

note right of CSV
CSV extends de FuenteEstatica porque es una
especialización de fuente de datos estática, que
lee hechos desde un archivo CSV. Esto permite
reutilizar comportamiento, mantener coherencia
con el dominio, y usar polimorfismo. Estaría mal?
end note

class Audio extends Multimedia{
    
}
class Video extends Multimedia{
    
}
class Foto extends Multimedia{
    
}

class SolicitudEliminacion{
    +hechoAEliminar: Hecho
    +motivo: String
    -estado: EstadoSolicitud
    {method}aceptarSolicitud()
    {method}rechazarSolicitud()
}

enum EstadoSolicitud{
    PENDIENTE
    APROBADA
    RECHAZADA
}


class Usuario{
    +nombre: String
    +apellido: String
    +edad: Int
    -rol: Rol
    +soliciitudesDeEliminacion: List<SolicitudEliminacion>
    {method}solicitarEliminacion(hecho:Hecho, motivo:String)
    {method}contribuirHecho(titulo:String, descripcion:String, longitud:Float, latitud:Float, categoria: String, multimedia: Multimedia, fecha:Date, anonimidad:Boolean)

}

enum Rol{
    VISUALIZADOR
    CONTRIBUYENTE
    ADMINISTRADOR 
}

interface Criterio{ 
    {method}cumple(Hecho)
}
class CriterioFecha implements Criterio{
    +fechaDesde:Date
    +fechaHasta:Date
    {method}cumple(Hecho)
}
class CriterioTitulo implements Criterio{
    +titulo:String 
    {method}cumple(Hecho)
}
class CriterioDescripcion implements Criterio{
    +descripcion:String
    {method}cumple(Hecho)
}
class CriterioCategoria implements Criterio{
    +categoria:String
    {method}cumple(Hecho)
}
class CriterioZona implements Criterio{
    +latitud:Float
    +longitud:Float
    {method}cumple(Hecho)
}
class CriterioOrigen implements Criterio{
    +origen:FuenteDeDatos
    {method}cumple(Hecho)
}
class CriterioMultimedia implements Criterio{
    +multimedia:Multimedia
    {method}cumple(Hecho)
}

class Coleccion{
    +titulo: String
    +descripcion: String
    +criterioPertenencia: List<Criterio>
    +fuenteDeDatos: FuenteDeDatos
    +handle: String
    {method}agregarCriterioPertenencia(criterio:Criterio)
    {method}eliminarCriterioPertenencia(criterio:Criterio)
    {method}filtrarPorCriterios(criterios:List<Criterio>)
}

    
interface FuenteDeDatos{
    +nombre: String
    +hechos: List<Hecho>
    {method}agregarHecho()
}

class FuenteEstatica implements FuenteDeDatos{
    {method}agregarHecho(titulo:String, descripcion:String, longitud:Float, latitud:Float, categoria: String, multimedia: Multimedia, fecha:Date)
    {method}importarHechos(pathCSV:String, fuenteEstatica:FuenteEstatica)
}

class FuenteDinamica implements FuenteDeDatos{
    {method}agregarHecho(titulo:String, descripcion:String, longitud:Float, latitud:Float, categoria: String, multimedia: Multimedia, fecha:Date, anonimidad:Boolean)
}

class FuenteProxy implements FuenteDeDatos{
    {method}agregarHecho(titulo:String, descripcion:String, longitud:Float, latitud:Float, categoria: String, multimedia: Multimedia, fecha:Date)
}

interface DetectorDeSpam{    
    {method}esSpam(String texto)
}



@enduml